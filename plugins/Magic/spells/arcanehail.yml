arcanehail:
  name: Arcane Hail
  description: Summon arcane spears to fall from the sky, each dealing 8 Magic Damage upon impact.
  category: arcane
  icon: arcanehail
  icon_disabled: arcanehail
  actions:
    cast:
    - class: Multiply
      actions:
      - class: ChangeContext
        actions:
          - class: Delay
            delay: rand(0,1500)
          - class: CustomProjectile
            hit_effects: none
            tick_effects: none
            miss_effects: none
            velocity: 1000
            range: 1000
            actions:
            - class: PlayEffects
              effects: summon
          - class: Delay
            delay: $warmup
          - class: CustomProjectile
            actions:
            - class: AreaOfEffect
              actions:
                - class: Velocity
                - class: Damage
  effects:
    summon:
      - class: EffectSingle
        location: target
        effectlib:
           class: Modified
           duration: $warmup
           parameters:
             radius: "(t/i) * 2 + 0.1"
           effect:
             class: Vortex
             particle_count: 1
             radials: 30
             grow: 0
             particle: crit_magic
             update_locations: false
             update_directions: false
             particle_data: 0
             pitch: 90
             offset: 0,0.2,0
    none: []
    tick:
      - location: target
        particle: spell_witch
        particle_offset: 0
        particle_count: 1
    hit:
      - location: target
        particle: spell_witch
        speed: 1
        particle_data: 0.2
        particle_offset: 0.1
        offset: 0,0.5,0
        particle_count: 6
      - sound: item_trident_hit
        sound_pitch: 1
        sound_volume: 0.4
        location: target
    hit_entity:
      - sound: entity_player_attack_knockback
        sound_pitch: 1
        sound_volume: 0.4
        location: target
  parameters:
    multiply: 12(1+wandpower/200)
    target_offset: 0,30,0
    random_target_offset: 15,0,15
    source_pitch: 180
    source_at_target: true
    velocity: 100
    radius: 2
    push: 0.4
    direction: 0,0.2,0
    target: block
    target_self: true
    damage_type: magic
    no_damage_ticks: 0
    damage: 8
    warmup: 1000
    range: 100
    cooldown: 16000
  costs:
    mana: 100

summon_test:
  name: Summon Test
  description: Test to try and get summons working
  icon: egg
  actions:
    cast:
    - class: ChangeContext
      source_is_target: true
      actions:
        - class: Repeat
          actions:
          - class: Spread
            actions:
            - class: SpawnEntity
              set_target: true
            - class: Aggro
            - class: Delay

  effects:
    cast:
    - location: target
      effectlib:
        class: Sphere
        duration: 2000
    - sound: magic.zap

  parameters:
      allow_replacement: false
      entity_parameters:
        brain:
          goals:
            - type: melee_attack
              priority: 1
            - type: follow_owner
              priority: 2
            - type: look_at_player
              priority: 3
          targets:
            - owner_hurt_target
            - owner_hurt_by_target
            - ownder_targeted_by_target
      entity_types:
          skeletonpeasant: 100
      target_type: LivingEntity
      allow_max_range: false
      range: 32
      cooldown: 50000
      undo: 60000
      repeat: 3
      radius: 3